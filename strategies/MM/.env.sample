# Exemple .env ─ configuration des sources de données (WebSocket / DB / CSV)

# -------------------------------------------------------------
# Sélection de la source de données
#   websocket  → données live Binance (par défaut)
#   db         → replay depuis une base SQL
#   csv        → replay depuis un fichier CSV top-of-book
# -------------------------------------------------------------
MM_DATA_SOURCE=db

# -------------------------------------------------------------
# Configuration CSV (top-of-book)
#   Format sans header par défaut:
#     timestamp, symbol, best_bid, best_ask, qty, feed, exchange
#   Exemple: strategies/airflow_public_binance_ladder_spot.csv
# -------------------------------------------------------------
MM_CSV_PATH=/absolute/path/to/strategies/airflow_public_binance_ladder_spot.csv
# Filtres optionnels (laisser vide sinon)
MM_CSV_FEED=binance
MM_CSV_EXCHANGE=binance
# Mapping des colonnes si votre CSV a un header différent (facultatif)
# MM_CSV_TIME_COL=timestamp
# MM_CSV_SYMBOL_COL=symbol
# MM_CSV_BID_COL=best_bid
# MM_CSV_ASK_COL=best_ask
# MM_CSV_BID_QTY_COL=
# MM_CSV_ASK_QTY_COL=
# MM_CSV_QTY_COL=qty

# -------------------------------------------------------------
# Configuration DB (si MM_DATA_SOURCE=db)
#   Deux formats possibles:
#     - json: colonne 'data' contenant le payload WS (Binance depthUpdate)
#     - top_of_book: colonnes best_bid/best_ask (+ quantités optionnelles)
# -------------------------------------------------------------
# MM_DB_URI=postgresql://user:password@host:5432/market_data   # ou sqlite:///depth_data.db
# MM_DB_TABLE=depth_messages
# MM_DB_FORMAT=top_of_book   # ou json
# MM_DB_SYMBOL_COL=symbol
# MM_DB_TIME_COL=event_time  # epoch ms conseillé
# MM_DB_BID_COL=best_bid
# MM_DB_ASK_COL=best_ask
# MM_DB_BID_QTY_COL=
# MM_DB_ASK_QTY_COL=
# MM_DB_QTY_COL=qty
# Filtres optionnels
# MM_DB_FEED=binance
# MM_DB_EXCHANGE=binance
# Fenêtre temporelle en epoch ms
# MM_DB_START_TS_MS=
# MM_DB_END_TS_MS=

# -------------------------------------------------------------
# Paramètres de replay
# -------------------------------------------------------------
MM_REPLAY_SPEED=1.0                 # 1.0 = temps réel, >1 accéléré (ex: 3.0)
MM_BACKTEST_DURATION_SECONDS=60     # Durée du backtest streaming (avec replay)

# -------------------------------------------------------------
# Clés API Binance (uniquement pour mode live)
# -------------------------------------------------------------
# BINANCE_API_KEY=
# BINANCE_API_SECRET=

# -------------------------------------------------------------
# Compatibilité ascendante avec anciens noms (optionnel)
# -------------------------------------------------------------
# BACKTEST_DB_URI=postgresql://user:password@host:5432/market_data
# BACKTEST_TABLE=depth_messages
# BACKTEST_REPLAY_SPEED=3.0